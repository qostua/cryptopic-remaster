{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["let encryption = document.querySelector(\".encryption\");\r\n\r\nlet encryptionToggle = document.querySelector(\".encryption_toggle\");\r\n\r\nencryption.classList.remove(\"encryption--encrypt\");\r\nencryption.classList.remove(\"encryption--decipher\");\r\n\r\nif (encryptionToggle.checked) {\r\n  encryption.classList.add(\"encryption--decipher\");\r\n} else {\r\n  encryption.classList.add(\"encryption--encrypt\");\r\n}\r\n\r\nencryptionToggle.addEventListener(\"click\", function() {\r\n  encryption.classList.remove(\"encryption--encrypt\");\r\n  encryption.classList.remove(\"encryption--decipher\");\r\n\r\n  if (encryptionToggle.checked) {\r\n    encryption.classList.add(\"encryption--decipher\");\r\n  } else {\r\n    encryption.classList.add(\"encryption--encrypt\");\r\n  }\r\n});\r\n\r\n\r\n\r\nlet encryptionData = {\r\n  addPicture(data, width, height, type, count = \"\") {\r\n    this[\"picture\" + count] = {\r\n      data: data,\r\n      width: width,\r\n      height: height,\r\n      type: type,\r\n    }\r\n  },\r\n  addMessage(text) {\r\n    this.messege = text;\r\n  },\r\n  addOperationType(type) {\r\n    this.operationType = type;\r\n  },\r\n}\r\nlet formEncrypt = document.querySelector(\".encryption_form--encrypt\");\r\n\r\nlet encryptBtnNext = formEncrypt.querySelector(\".encryption_form-btn--next\");\r\nlet encryptBtnBack = formEncrypt.querySelector(\".encryption_form-btn--back\");\r\n\r\nlet formEncryptSteps = formEncrypt.querySelectorAll(\".encryption_form-step\");\r\nlet formEncryptStepsArray = Array.from(formEncryptSteps);\r\n\r\nlet encryptPic = formEncrypt.querySelector(\".encryption_form-encrypt-pic\");\r\n\r\nlet encryptGoNextStep = function () {\r\n  if (formEncrypt.dataset.stepCount == 1) {\r\n    formEncrypt.dataset.stepCount = +formEncrypt.dataset.stepCount + 1;\r\n  } else if (formEncrypt.dataset.stepCount == 2) {\r\n    let cookie = document.cookie;\r\n    let csrfToken = cookie.substring(cookie.indexOf('=') + 1);\r\n    fetch(\r\n      // '/req',\r\n      'https://jsonplaceholder.typicode.com/posts',\r\n      {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'X-Requested-With' : 'XMLHttpRequest',\r\n          'X-CSRFToken': csrfToken\r\n        },\r\n        body: JSON.stringify(encryptionData),\r\n      })\r\n      .then((response) => response.json())\r\n      .then((json) => encryptPic.src = json.picture.data);\r\n      formEncrypt.dataset.stepCount = +formEncrypt.dataset.stepCount + 1;\r\n  }\r\n}\r\nlet encryptGoBackStep = function () {\r\n  formEncrypt.dataset.stepCount = +formEncrypt.dataset.stepCount - 1;\r\n}\r\n\r\nencryptBtnNext.addEventListener(\"click\", encryptGoNextStep);\r\nencryptBtnBack.addEventListener(\"click\", encryptGoBackStep);\r\n\r\nlet formEncryptInputFile = formEncrypt.querySelector(\".encryption_form-picture-input\");\r\nlet formEncryptInputText = formEncrypt.querySelector(\".encryption_form-text-input\");\r\nlet formEncryptImage = formEncrypt.querySelector(\".encryption_form-downloaded-pic\");\r\n\r\nlet toggleDownloadedPic = function(form, countPic = \"\") {\r\n  form.classList.add(`encryption_form--downloaded-pic${countPic}`);\r\n}\r\n\r\nlet convertBase64 = (file) => {\r\n  return new Promise((resolve, reject) => {\r\n    const fileReader = new FileReader();\r\n    fileReader.readAsDataURL(file);\r\n\r\n    fileReader.onload = () => {\r\n      resolve(fileReader.result);\r\n    };\r\n\r\n    fileReader.onerror = (error) => {\r\n      reject(error);\r\n    };\r\n  });\r\n};\r\n\r\nlet uploadImage = async (event, image) => {\r\n  const file = event.target.files[0];\r\n  const base64 = await convertBase64(file);\r\n  image.src = base64;\r\n};\r\n\r\nlet declareDataEncrypt = function(image, messege) {\r\n  let imageWidth = image.naturalWidth;\r\n  let imageHeight = image.naturalHeight;\r\n  let imageType = image.src.slice(image.src.indexOf(\"/\") + 1, image.src.indexOf(\";\"));\r\n\r\n  encryptionData.addPicture(image.src, imageWidth, imageHeight, imageType);\r\n  encryptionData.addMessage(messege);\r\n  encryptionData.addOperationType(\"encrypt\");\r\n}\r\n\r\nformEncryptInputFile.addEventListener(\"change\", (e) => {\r\n  uploadImage(e, formEncryptImage);\r\n  toggleDownloadedPic(formEncrypt);\r\n  formEncryptImage.onload = function() {\r\n    declareDataEncrypt(formEncryptImage, formEncryptInputText.value);\r\n  };\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nlet formDecipher = document.querySelector(\".encryption_form--decipher\");\r\n\r\nlet decipherBtnNext = formDecipher.querySelector(\".encryption_form-btn--next\");\r\nlet decipherBtnBack = formDecipher.querySelector(\".encryption_form-btn--back\");\r\nlet formDecipherSteps = formDecipher.querySelectorAll(\".encryption_form-step\");\r\nlet formDecipherStepsArray = Array.from(formDecipherSteps);\r\n\r\nlet encryptText = formDecipher.querySelector(\".encryption_form-text-input\");\r\n\r\nlet decipherGoNextStep = function () {\r\n  if (formDecipher.dataset.stepCount == 1) {\r\n    formDecipher.dataset.stepCount = +formDecipher.dataset.stepCount + 1;\r\n  } else if (formDecipher.dataset.stepCount == 2) {\r\n    let cookie = document.cookie;\r\n    let csrfToken = cookie.substring(cookie.indexOf('=') + 1);\r\n    fetch(\r\n      // '/req',\r\n      'https://jsonplaceholder.typicode.com/posts',\r\n      {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'X-Requested-With' : 'XMLHttpRequest',\r\n          'X-CSRFToken': csrfToken\r\n        },\r\n        body: JSON.stringify(encryptionData),\r\n      })\r\n      .then((response) => response.json())\r\n      .then((json) => encryptText.value = json.messege);\r\n      formDecipher.dataset.stepCount = +formDecipher.dataset.stepCount + 1;\r\n  }\r\n}\r\nlet decipherGoBackStep = function () {\r\n  formDecipher.dataset.stepCount = +formDecipher.dataset.stepCount - 1;\r\n}\r\n\r\ndecipherBtnNext.addEventListener(\"click\", decipherGoNextStep);\r\ndecipherBtnBack.addEventListener(\"click\", decipherGoBackStep);\r\n\r\nlet formDecipherInputFileFirst = formDecipher.querySelector(\".encryption_form-step[data-step='1'] .encryption_form-picture-input\");\r\nlet formDecipherImageFirst = formDecipher.querySelector(\".encryption_form-step[data-step='1'] .encryption_form-downloaded-pic\");\r\n\r\nlet formDecipherInputFileSecond = formDecipher.querySelector(\".encryption_form-step[data-step='2'] .encryption_form-picture-input\");\r\nlet formDecipherImageSecond = formDecipher.querySelector(\".encryption_form-step[data-step='2'] .encryption_form-downloaded-pic\");\r\n\r\nlet declareDataDecipher = function(imageFirst, imageSecond) {\r\n  encryptionData.addOperationType(\"decipher\");\r\n\r\n  let imageFirstWidth = imageFirst.naturalWidth;\r\n  let imageFirstHeight = imageFirst.naturalHeight;\r\n  let imageFirstType = imageFirst.src.slice(imageFirst.src.indexOf(\"/\") + 1, imageFirst.src.indexOf(\";\"));\r\n\r\n  encryptionData.addPicture(imageFirst.src, imageFirstWidth, imageFirstHeight, imageFirstType, 1);\r\n\r\n  let imageSecondWidth = imageSecond.naturalWidth;\r\n  let imageSecondHeight = imageSecond.naturalHeight;\r\n  let imageSecondType = imageSecond.src.slice(imageSecond.src.indexOf(\"/\") + 1, imageSecond.src.indexOf(\";\"));\r\n  encryptionData.addPicture(imageSecond.src, imageSecondWidth, imageSecondHeight, imageSecondType, 2);\r\n}\r\n\r\nformDecipherInputFileFirst.addEventListener(\"change\", (e) => {\r\n  uploadImage(e, formDecipherImageFirst);\r\n  toggleDownloadedPic(formDecipher, 1);\r\n});\r\nformDecipherInputFileSecond.addEventListener(\"change\", (e) => {\r\n  uploadImage(e, formDecipherImageSecond);\r\n  toggleDownloadedPic(formDecipher, 2);\r\n  formDecipherImageSecond.onload = function() {\r\n    declareDataDecipher(formDecipherImageFirst, formDecipherImageSecond);\r\n  };\r\n});\r\n"]}